<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ball Sorting Algorithm - Portfolio</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        }
        .text-shadow {
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
        }
        @keyframes slideDown {
            from { transform: translateY(-100px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        @keyframes slideRight {
            from { transform: translateX(-50px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        @keyframes flowDown {
            from { stroke-dashoffset: 100; }
            to { stroke-dashoffset: 0; }
        }
        .animate-slide-down {
            animation: slideDown 0.5s ease-out forwards;
        }
        .animate-slide-right {
            animation: slideRight 0.5s ease-out forwards;
        }
        .animate-bounce {
            animation: bounce 0.6s ease-in-out;
        }
        .animate-pulse-slow {
            animation: pulse 2s ease-in-out infinite;
        }
        .tube-flow {
            stroke-dasharray: 10 5;
            animation: flowDown 1s linear infinite;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Icon components
        const ChevronDown = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" />
            </svg>
        );

        const ChevronRight = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
            </svg>
        );

        const Code = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
            </svg>
        );

        const Cpu = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <rect x="4" y="4" width="16" height="16" rx="2" strokeWidth={2} />
                <rect x="9" y="9" width="6" height="6" strokeWidth={2} />
                <path d="M9 2v2M15 2v2M9 20v2M15 20v2M20 9h2M20 15h2M2 9h2M2 15h2" strokeWidth={2} />
            </svg>
        );

        const GitBranch = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <circle cx="6" cy="6" r="3" strokeWidth={2} />
                <circle cx="6" cy="18" r="3" strokeWidth={2} />
                <circle cx="18" cy="18" r="3" strokeWidth={2} />
                <path d="M6 9v6M18 15V9a6 6 0 00-12 0" strokeWidth={2} />
            </svg>
        );

        const Zap = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 10V3L4 14h7v7l9-11h-7z" />
            </svg>
        );

        const Database = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <ellipse cx="12" cy="5" rx="9" ry="3" strokeWidth={2} />
                <path d="M3 5v14c0 1.66 4.03 3 9 3s9-1.34 9-3V5M3 12c0 1.66 4.03 3 9 3s9-1.34 9-3" strokeWidth={2} />
            </svg>
        );

        const Box = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" />
            </svg>
        );

        const Play = ({ className }) => (
            <svg className={className} fill="currentColor" viewBox="0 0 24 24">
                <path d="M8 5v14l11-7z" />
            </svg>
        );

        const Pause = ({ className }) => (
            <svg className={className} fill="currentColor" viewBox="0 0 24 24">
                <path d="M6 4h4v16H6V4zm8 0h4v16h-4V4z" />
            </svg>
        );

        const RotateCcw = ({ className }) => (
            <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M1 4v6h6M23 20v-6h-6" />
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M20.49 9A9 9 0 005.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 013.51 15" />
            </svg>
        );

        // Animated Ball Sorter Component
        const AnimatedBallSorter = () => {
            const [isPlaying, setIsPlaying] = useState(false);
            const [balls, setBalls] = useState([]);
            const [sortedBalls, setSortedBalls] = useState([[], [], [], [], [], []]);
            const [currentBall, setCurrentBall] = useState(null);
            const [stage, setStage] = useState('idle'); // idle, dropping, sorting, storing
            const ballIdRef = useRef(0);

            const colors = [
                { name: 'Red', hue: 0, color: '#FF5733' },
                { name: 'Orange', hue: 30, color: '#FF8C00' },
                { name: 'Yellow', hue: 60, color: '#FFD700' },
                { name: 'Green', hue: 120, color: '#2ECC71' },
                { name: 'Blue', hue: 240, color: '#3498DB' },
                { name: 'Purple', hue: 280, color: '#9B59B6' }
            ];

            const addRandomBall = () => {
                const randomColor = colors[Math.floor(Math.random() * colors.length)];
                const newBall = { id: ballIdRef.current++, ...randomColor, position: 0 };
                setBalls(prev => [...prev, newBall]);
            };

            const reset = () => {
                setIsPlaying(false);
                setBalls([]);
                setSortedBalls([[], [], [], [], [], []]);
                setCurrentBall(null);
                setStage('idle');
                ballIdRef.current = 0;
            };

            const processBall = () => {
                if (balls.length === 0) {
                    setIsPlaying(false);
                    setStage('idle');
                    return;
                }

                const ball = balls[0];
                setCurrentBall(ball);
                setStage('dropping');

                setTimeout(() => {
                    setStage('sorting');
                    setTimeout(() => {
                        setStage('storing');
                        const columnIndex = colors.findIndex(c => c.hue === ball.hue);
                        setSortedBalls(prev => {
                            const newSorted = [...prev];
                            newSorted[columnIndex] = [...newSorted[columnIndex], ball];
                            return newSorted;
                        });
                        
                        setTimeout(() => {
                            setBalls(prev => prev.slice(1));
                            setCurrentBall(null);
                            setStage('idle');
                        }, 500);
                    }, 800);
                }, 600);
            };

            useEffect(() => {
                if (isPlaying && stage === 'idle' && balls.length > 0) {
                    const timer = setTimeout(processBall, 300);
                    return () => clearTimeout(timer);
                }
            }, [isPlaying, balls, stage]);

            return (
                <div className="bg-gray-900 rounded-lg p-6 border border-gray-700">
                    <div className="flex justify-between items-center mb-6">
                        <h3 className="text-xl font-mono text-cyan-400">INTERACTIVE_BALL_SORTER</h3>
                        <div className="flex gap-2">
                            <button
                                onClick={addRandomBall}
                                className="bg-green-600 hover:bg-green-700 px-4 py-2 rounded text-white text-sm font-mono"
                            >
                                + ADD BALL
                            </button>
                            <button
                                onClick={() => setIsPlaying(!isPlaying)}
                                className="bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded text-white flex items-center gap-2"
                                disabled={balls.length === 0}
                            >
                                {isPlaying ? <Pause className="w-4 h-4" /> : <Play className="w-4 h-4" />}
                                {isPlaying ? 'PAUSE' : 'START'}
                            </button>
                            <button
                                onClick={reset}
                                className="bg-red-600 hover:bg-red-700 px-4 py-2 rounded text-white flex items-center gap-2"
                            >
                                <RotateCcw className="w-4 h-4" />
                                RESET
                            </button>
                        </div>
                    </div>

                    <div className="relative bg-black rounded-lg p-4 min-h-96">
                        {/* Magazine (Input Queue) */}
                        <div className="absolute top-4 left-1/2 transform -translate-x-1/2 bg-gray-800 border-2 border-cyan-500 rounded px-4 py-2 w-32">
                            <div className="text-center text-cyan-400 text-xs font-mono mb-2">MAGAZINE</div>
                            <div className="flex flex-col-reverse gap-1 items-center">
                                {balls.slice(0, 5).map((ball, idx) => (
                                    <div
                                        key={ball.id}
                                        className="w-8 h-8 rounded-full border-2 border-gray-600 flex items-center justify-center text-white text-xs font-bold shadow-lg"
                                        style={{ backgroundColor: ball.color }}
                                    >
                                        {ball.id}
                                    </div>
                                ))}
                            </div>
                            {balls.length > 5 && (
                                <div className="text-center text-yellow-400 text-xs mt-1">+{balls.length - 5}</div>
                            )}
                        </div>

                        {/* Dropping Ball */}
                        {currentBall && stage === 'dropping' && (
                            <div
                                className="absolute animate-slide-down"
                                style={{
                                    top: '80px',
                                    left: '50%',
                                    transform: 'translateX(-50%)'
                                }}
                            >
                                <div
                                    className="w-10 h-10 rounded-full border-2 border-gray-600 flex items-center justify-center text-white text-sm font-bold shadow-lg"
                                    style={{ backgroundColor: currentBall.color }}
                                >
                                    {currentBall.id}
                                </div>
                            </div>
                        )}

                        {/* Binary Tree Sorter */}
                        <svg className="absolute" style={{ top: '140px', left: '50%', transform: 'translateX(-50%)', width: '400px', height: '200px' }}>
                            {/* Tree structure */}
                            <line x1="200" y1="20" x2="100" y2="80" stroke="#4B5563" strokeWidth="2" />
                            <line x1="200" y1="20" x2="300" y2="80" stroke="#4B5563" strokeWidth="2" />
                            <line x1="100" y1="80" x2="50" y2="140" stroke="#4B5563" strokeWidth="2" />
                            <line x1="100" y1="80" x2="150" y2="140" stroke="#4B5563" strokeWidth="2" />
                            <line x1="300" y1="80" x2="250" y2="140" stroke="#4B5563" strokeWidth="2" />
                            <line x1="300" y1="80" x2="350" y2="140" stroke="#4B5563" strokeWidth="2" />

                            {/* Decision nodes */}
                            <circle cx="200" cy="20" r="15" fill="#1F2937" stroke="#06B6D4" strokeWidth="2" />
                            <text x="200" y="25" textAnchor="middle" fill="#06B6D4" fontSize="10" fontFamily="monospace">H&lt;180</text>
                            
                            <circle cx="100" cy="80" r="15" fill="#1F2937" stroke="#06B6D4" strokeWidth="2" />
                            <text x="100" y="85" textAnchor="middle" fill="#06B6D4" fontSize="10" fontFamily="monospace">H&lt;60</text>
                            
                            <circle cx="300" cy="80" r="15" fill="#1F2937" stroke="#06B6D4" strokeWidth="2" />
                            <text x="300" y="85" textAnchor="middle" fill="#06B6D4" fontSize="10" fontFamily="monospace">H&lt;260</text>

                            {/* Leaf nodes with colors */}
                            {colors.map((color, idx) => {
                                const positions = [50, 150, 250, 350, 50, 150];
                                const x = positions[idx];
                                const y = 140;
                                return (
                                    <g key={idx}>
                                        <circle cx={x} cy={y} r="12" fill={color.color} stroke="#4B5563" strokeWidth="2" />
                                        {currentBall && stage === 'sorting' && currentBall.hue === color.hue && (
                                            <circle cx={x} cy={y} r="16" fill="none" stroke="#FFD700" strokeWidth="2" className="animate-pulse-slow" />
                                        )}
                                    </g>
                                );
                            })}
                        </svg>

                        {/* Storage Tubes */}
                        <div className="absolute" style={{ top: '360px', left: '50%', transform: 'translateX(-50%)', width: '600px' }}>
                            <div className="flex justify-around">
                                {colors.map((color, colIdx) => (
                                    <div key={colIdx} className="relative">
                                        {/* Tube */}
                                        <div className="w-12 bg-gray-800 border-2 border-gray-600 rounded-t-lg relative" style={{ height: '200px' }}>
                                            <div className="absolute top-0 left-0 w-full text-center">
                                                <div className="text-xs text-gray-400 font-mono mb-1">{color.name}</div>
                                            </div>
                                            
                                            {/* Connecting tube line */}
                                            <svg className="absolute -top-20 left-1/2 transform -translate-x-1/2" width="4" height="80">
                                                <line 
                                                    x1="2" y1="0" x2="2" y2="80" 
                                                    stroke={color.color} 
                                                    strokeWidth="3"
                                                    className={currentBall && stage === 'storing' && currentBall.hue === color.hue ? 'tube-flow' : ''}
                                                    opacity="0.6"
                                                />
                                            </svg>

                                            {/* Balls in tube */}
                                            <div className="flex flex-col-reverse gap-1 items-center pt-8">
                                                {sortedBalls[colIdx].map((ball, idx) => (
                                                    <div
                                                        key={ball.id}
                                                        className="w-10 h-10 rounded-full border-2 border-gray-600 flex items-center justify-center text-white text-xs font-bold shadow-lg animate-slide-down"
                                                        style={{ 
                                                            backgroundColor: ball.color,
                                                            animationDelay: `${idx * 0.1}s`
                                                        }}
                                                    >
                                                        {ball.id}
                                                    </div>
                                                ))}
                                            </div>
                                        </div>

                                        {/* Inserter mechanism */}
                                        <div className="absolute -right-8 top-0 h-full flex items-center">
                                            <div className="w-6 h-6 bg-yellow-600 border-2 border-yellow-400 rounded-full flex items-center justify-center">
                                                <div className="text-xs text-white">↕</div>
                                            </div>
                                        </div>

                                        {/* Ball count */}
                                        <div className="absolute -bottom-6 left-0 w-full text-center text-green-400 text-xs font-mono">
                                            {sortedBalls[colIdx].length} balls
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>

                        {/* Status indicator */}
                        <div className="absolute bottom-4 left-4 bg-gray-800 border border-cyan-500 rounded px-3 py-2">
                            <div className="text-cyan-400 text-xs font-mono">
                                STATUS: <span className="text-white">{stage.toUpperCase()}</span>
                            </div>
                            <div className="text-cyan-400 text-xs font-mono">
                                QUEUE: <span className="text-white">{balls.length} balls</span>
                            </div>
                            <div className="text-cyan-400 text-xs font-mono">
                                SORTED: <span className="text-white">{sortedBalls.flat().length} balls</span>
                            </div>
                        </div>
                    </div>

                    {/* Legend */}
                    <div className="mt-4 bg-gray-800 border border-gray-700 rounded p-3">
                        <div className="text-sm font-mono text-gray-400 mb-2">SYSTEM_COMPONENTS:</div>
                        <div className="grid grid-cols-3 gap-2 text-xs font-mono">
                            <div className="flex items-center gap-2">
                                <div className="w-3 h-3 bg-cyan-500 rounded"></div>
                                <span className="text-gray-300">Magazine (Input Queue)</span>
                            </div>
                            <div className="flex items-center gap-2">
                                <div className="w-3 h-3 bg-gray-600 rounded-full"></div>
                                <span className="text-gray-300">Binary Tree Sorter</span>
                            </div>
                            <div className="flex items-center gap-2">
                                <div className="w-3 h-3 bg-gray-700 rounded"></div>
                                <span className="text-gray-300">Storage Tubes</span>
                            </div>
                            <div className="flex items-center gap-2">
                                <div className="w-3 h-3 bg-yellow-600 rounded-full"></div>
                                <span className="text-gray-300">Ball Inserters</span>
                            </div>
                            <div className="flex items-center gap-2">
                                <div className="w-3 h-3 bg-green-600 rounded"></div>
                                <span className="text-gray-300">Flow Indicators</span>
                            </div>
                            <div className="flex items-center gap-2">
                                <div className="w-3 h-3 bg-red-600 rounded-full"></div>
                                <span className="text-gray-300">Active Ball</span>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const Section = ({ title, children, icon: Icon, defaultOpen = false }) => {
            const [isOpen, setIsOpen] = useState(defaultOpen);
            
            return (
                <div className="border border-gray-700 rounded-lg mb-4 overflow-hidden bg-gray-800 shadow-lg">
                    <button
                        onClick={() => setIsOpen(!isOpen)}
                        className="w-full px-6 py-4 flex items-center justify-between hover:bg-gray-750 transition-colors"
                    >
                        <div className="flex items-center gap-3">
                            <Icon className="w-5 h-5 text-cyan-400" />
                            <span className="font-semibold text-lg text-white">{title}</span>
                        </div>
                        {isOpen ? <ChevronDown className="w-5 h-5 text-gray-400" /> : <ChevronRight className="w-5 h-5 text-gray-400" />}
                    </button>
                    {isOpen && (
                        <div className="px-6 py-4 border-t border-gray-700 bg-gray-850">
                            {children}
                        </div>
                    )}
                </div>
            );
        };

        const CodeBlock = ({ title, code }) => {
            const [showCode, setShowCode] = useState(false);
            
            return (
                <div className="my-4">
                    <button
                        onClick={() => setShowCode(!showCode)}
                        className="flex items-center gap-2 text-sm font-mono font-medium text-cyan-400 hover:text-cyan-300 mb-2 bg-gray-900 px-3 py-1 rounded"
                    >
                        <Code className="w-4 h-4" />
                        {showCode ? '[-]' : '[+]'} {title}
                    </button>
                    {showCode && (
                        <pre className="bg-black text-green-400 p-4 rounded-lg overflow-x-auto text-xs font-mono border border-green-900">
                            <code>{code}</code>
                        </pre>
                    )}
                </div>
            );
        };

        function BallSortingPortfolio() {
            return (
                <div className="min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black text-gray-100 p-6">
                    <div className="max-w-6xl mx-auto">
                        {/* Header */}
                        <div className="bg-gradient-to-r from-cyan-600 to-blue-600 rounded-lg p-8 mb-8 shadow-2xl border border-cyan-500">
                            <div className="flex items-center gap-3 mb-3">
                                <Cpu className="w-10 h-10 text-cyan-200" />
                                <h1 className="text-5xl font-bold text-white font-mono">BALL_SORT_v2.3</h1>
                            </div>
                            <p className="text-xl text-cyan-100 mb-4 font-mono">
                                A multi-dimensional sorting algorithm for dynamic ball classification and spatial organization
                            </p>
                            <div className="flex gap-3 text-xs font-mono flex-wrap">
                                <div className="bg-cyan-700 px-3 py-1 rounded border border-cyan-500">O(n log n) avg</div>
                                <div className="bg-cyan-700 px-3 py-1 rounded border border-cyan-500">HSL Color Space</div>
                                <div className="bg-cyan-700 px-3 py-1 rounded border border-cyan-500">Binary Tree Sort</div>
                                <div className="bg-cyan-700 px-3 py-1 rounded border border-cyan-500">Adaptive Insertion</div>
                                <div className="bg-cyan-700 px-3 py-1 rounded border border-cyan-500">Real-Time Animation</div>
                            </div>
                        </div>

                        {/* Interactive Sorter */}
                        <AnimatedBallSorter />

                        {/* System Overview */}
                        <div className="bg-gray-800 rounded-lg p-6 my-6 shadow-lg border border-gray-700">
                            <div className="flex items-center gap-2 mb-4">
                                <Database className="w-6 h-6 text-green-400" />
                                <h2 className="text-2xl font-bold text-white font-mono">SYSTEM_ARCHITECTURE</h2>
                            </div>
                            <p className="text-gray-300 leading-relaxed mb-4 font-mono text-sm">
                                This is a production-grade, real-time ball sorting system with magazine-fed input, binary tree decision logic, and columnar storage with dynamic insertion capabilities. Watch balls flow through the system in real-time!
                            </p>
                            <div className="grid grid-cols-4 gap-4">
                                <div className="bg-gray-900 p-4 rounded border border-cyan-900">
                                    <div className="text-cyan-400 font-mono text-xs mb-2">PHASE 1: INPUT</div>
                                    <div className="text-gray-400 text-xs">Magazine queue → Ball release → Color detection</div>
                                </div>
                                <div className="bg-gray-900 p-4 rounded border border-green-900">
                                    <div className="text-green-400 font-mono text-xs mb-2">PHASE 2: SORTING</div>
                                    <div className="text-gray-400 text-xs">Binary tree navigation → Hue comparison → Path selection</div>
                                </div>
                                <div className="bg-gray-900 p-4 rounded border border-yellow-900">
                                    <div className="text-yellow-400 font-mono text-xs mb-2">PHASE 3: STORAGE</div>
                                    <div className="text-gray-400 text-xs">Tube routing → Column insertion → Stack management</div>
                                </div>
                                <div className="bg-gray-900 p-4 rounded border border-purple-900">
                                    <div className="text-purple-400 font-mono text-xs mb-2">PHASE 4: INSERTION</div>
                                    <div className="text-gray-400 text-xs">Inserter activation → Ball parting → Dynamic reorg</div>
                                </div>
                            </div>
                        </div>

                        {/* Module 1: Magazine System */}
                        <Section title="MODULE_01: Magazine & Input Queue Management" icon={Box} defaultOpen={true}>
                            <div className="space-y-4">
                                <div className="bg-gray-900 border-l-4 border-cyan-500 p-4">
                                    <h4 className="font-mono text-cyan-400 mb-2">ENGINEERING_CHALLENGE</h4>
                                    <p className="text-gray-300 text-sm">
                                        The magazine system acts as a FIFO (First-In-First-Out) queue, buffering incoming balls before they enter the sorting mechanism. This prevents overflow and ensures smooth, controlled ball flow through the system.
                                    </p>
                                </div>

                                <CodeBlock 
                                    title="magazine_controller.py - Queue Management"
                                    code={`from collections import deque
from threading import Lock

class MagazineController:
    """
    Thread-safe magazine queue with capacity management
    Implements producer-consumer pattern for ball flow control
    """
    def __init__(self, capacity=50):
        self.queue = deque(maxlen=capacity)
        self.lock = Lock()
        self.capacity = capacity
        self.total_processed = 0
        
    def add_ball(self, ball: Ball) -> bool:
        """
        Add ball to magazine queue
        Returns False if magazine is full (backpressure)
        """
        with self.lock:
            if len(self.queue) >= self.capacity:
                return False  # Apply backpressure
            
            self.queue.append(ball)
            return True
    
    def release_ball(self) -> Optional[Ball]:
        """
        Release next ball from magazine
        FIFO order ensures balls are processed in arrival order
        """
        with self.lock:
            if len(self.queue) == 0:
                return None
            
            ball = self.queue.popleft()
            self.total_processed += 1
            return ball
    
    def get_status(self) -> dict:
        """Return current magazine status"""
        with self.lock:
            return {
                'current_size': len(self.queue),
                'capacity': self.capacity,
                'utilization': len(self.queue) / self.capacity,
                'total_processed': self.total_processed
            }`}
                                />

                                <div className="bg-blue-950 border border-blue-700 p-4 rounded">
                                    <h4 className="font-mono text-blue-400 mb-2 text-sm">REAL_WORLD: Kafka Message Queues</h4>
                                    <p className="text-blue-200 text-xs leading-relaxed">
                                        This magazine system is conceptually identical to Apache Kafka's topic partitions. LinkedIn processes 7+ trillion messages/day using this exact pattern: producers (ball inputs) write to a queue, consumers (sorting mechanism) read at their own pace. The backpressure mechanism prevents system overload—same principle used in every high-throughput data pipeline.
                                    </p>
                                </div>
                            </div>
                        </Section>

                        {/* Module 2: Binary Tree Sorter */}
                        <Section title="MODULE_02: Binary Decision Tree Sorting Logic" icon={GitBranch}>
                            <div className="space-y-4">
                                <div className="bg-gray-900 border-l-4 border-green-500 p-4">
                                    <h4 className="font-mono text-green-400 mb-2">ALGORITHMIC_DESIGN</h4>
                                    <p className="text-gray-300 text-sm">
                                        The binary tree sorter makes logarithmic comparisons (O(log n)) to route each ball to its destination column. Each node compares the ball's hue value against a threshold, directing it left or right until it reaches a leaf node representing a storage column.
                                    </p>
                                </div>

                                <CodeBlock 
                                    title="tree_sorter.py - Binary Decision Tree"
                                    code={`class TreeNode:
    """Single node in the binary decision tree"""
    def __init__(self, threshold=None, column=None):
        self.threshold = threshold  # Hue comparison value
        self.column = column        # Target column (leaf nodes only)
        self.left = None           # Left child (hue < threshold)
        self.right = None          # Right child (hue >= threshold)
        self.decision_count = 0    # Performance tracking

class BinaryTreeSorter:
    """
    Binary tree-based ball sorting with O(log n) routing
    Tree depth: 3 levels for 6 color categories
    """
    def __init__(self):
        self.root = self._build_tree()
        self.routing_decisions = []
        
    def _build_tree(self) -> TreeNode:
        """
        Construct balanced binary tree for color sorting
        
        Tree Structure:
                     [H < 180°]
                    /          \\
             [H < 60°]        [H < 260°]
              /    \\           /      \\
          Red    Orange    Green    Blue
                Yellow              Purple
        """
        # Root: split warm/cool colors
        root = TreeNode(threshold=180)
        
        # Left subtree: warm colors (0-180°)
        root.left = TreeNode(threshold=60)
        root.left.left = TreeNode(column=0)   # Red (0-30°)
        root.left.right = TreeNode(threshold=90)
        root.left.right.left = TreeNode(column=1)  # Orange (30-60°)
        root.left.right.right = TreeNode(column=2) # Yellow (60-120°)
        
        # Right subtree: cool colors (180-360°)
        root.right = TreeNode(threshold=260)
        root.right.left = TreeNode(column=3)  # Green (120-180°)
        root.right.right = TreeNode(threshold=300)
        root.right.right.left = TreeNode(column=4)  # Blue (180-260°)
        root.right.right.right = TreeNode(column=5) # Purple (260-360°)
        
        return root
    
    def route_ball(self, ball: Ball) -> int:
        """
        Route ball through tree to determine storage column
        Returns: Column index (0-5)
        Time Complexity: O(log n) where n is number of columns
        """
        current = self.root
        path = []  # Track decision path for debugging
        
        while current.column is None:
            current.decision_count += 1
            
            if ball.hsl[0] < current.threshold:
                path.append(f"LEFT (H={ball.hsl[0]:.1f} < {current.threshold})")
                current = current.left
            else:
                path.append(f"RIGHT (H={ball.hsl[0]:.1f} >= {current.threshold})")
                current = current.right
        
        self.routing_decisions.append({
            'ball_id': ball.id,
            'path': path,
            'column': current.column,
            'hue': ball.hsl[0]
        })
        
        return current.column
    
    def get_tree_stats(self) -> dict:
        """Analyze tree performance"""
        return {
            'total_routes': len(self.routing_decisions),
            'avg_depth': sum(len(d['path']) for d in self.routing_decisions) / 
                        max(len(self.routing_decisions), 1),
            'theoretical_depth': 3,  # log2(6) ≈ 2.58, rounded to 3
        }`}
                                />

                                <div className="grid grid-cols-2 gap-4">
                                    <div className="bg-purple-950 border border-purple-700 p-4 rounded">
                                        <h4 className="font-mono text-purple-400 mb-2 text-xs">COMPLEXITY_ANALYSIS</h4>
                                        <div className="space-y-1 text-xs text-purple-200 font-mono">
                                            <div>ROUTING: O(log n) per ball</div>
                                            <div>DEPTH: 3 levels for 6 columns</div>
                                            <div>COMPARISONS: 2-3 per ball</div>
                                            <div>SPACE: O(n) for n columns</div>
                                        </div>
                                    </div>
                                    <div className="bg-orange-950 border border-orange-700 p-4 rounded">
                                        <h4 className="font-mono text-orange-400 mb-2 text-xs">REAL_WORLD: Network Routers</h4>
                                        <p className="text-xs text-orange-200">
                                            Cisco routers use binary decision trees for packet routing. They compare IP addresses against thresholds to determine next hop—exactly like our hue-based ball routing. BGP routing tables with millions of entries still achieve O(log n) lookups.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </Section>

                        {/* Module 3: Storage Tubes */}
                        <Section title="MODULE_03: Columnar Storage & Tube Management" icon={Database}>
                            <div className="space-y-4">
                                <div className="bg-gray-900 border-l-4 border-yellow-500 p-4">
                                    <h4 className="font-mono text-yellow-400 mb-2">STORAGE_OPTIMIZATION</h4>
                                    <p className="text-gray-300 text-sm">
                                        Storage tubes are vertical stacks implementing LIFO (Last-In-First-Out) for efficient ball retrieval. Each tube is a column-oriented storage structure with O(1) push and pop operations, similar to how columnar databases store data.
                                    </p>
                                </div>

                                <CodeBlock 
                                    title="storage_tubes.py - Column Storage System"
                                    code={`class StorageTube:
    """
    Single storage column with capacity management
    Implements stack-based storage for efficient access
    """
    def __init__(self, column_id: int, capacity: int = 100):
        self.column_id = column_id
        self.capacity = capacity
        self.balls = []  # Stack: newest balls on top
        self.total_stored = 0
        self.color_category = None
        
    def insert_ball(self, ball: Ball, position: int = -1) -> bool:
        """
        Insert ball at specified position
        position=-1: append to top (default)
        position=N: insert at index N, shifting others down
        """
        if len(self.balls) >= self.capacity:
            return False  # Tube full
        
        if position == -1:
            self.balls.append(ball)
        else:
            # Insert in middle - shift existing balls
            self.balls.insert(position, ball)
        
        self.total_stored += 1
        return True
    
    def remove_ball(self, position: int = -1) -> Optional[Ball]:
        """
        Remove ball from specified position
        position=-1: pop from top (LIFO)
        position=N: remove from index N
        """
        if len(self.balls) == 0:
            return None
        
        if position == -1:
            return self.balls.pop()
        else:
            return self.balls.pop(position)
    
    def peek_top(self) -> Optional[Ball]:
        """View top ball without removing"""
        return self.balls[-1] if self.balls else None
    
    def get_stats(self) -> dict:
        """Return tube statistics"""
        return {
            'column_id': self.column_id,
            'current_count': len(self.balls),
            'capacity': self.capacity,
            'utilization': len(self.balls) / self.capacity,
            'total_stored': self.total_stored
        }

class TubeManager:
    """Manages all storage tubes with load balancing"""
    def __init__(self, num_tubes: int = 6):
        self.tubes = [StorageTube(i) for i in range(num_tubes)]
        
    def store_ball(self, ball: Ball, column: int) -> bool:
        """Route ball to appropriate tube"""
        return self.tubes[column].insert_ball(ball)
    
    def get_system_stats(self) -> dict:
        """Aggregate statistics across all tubes"""
        stats = [tube.get_stats() for tube in self.tubes]
        total_balls = sum(s['current_count'] for s in stats)
        
        return {
            'total_balls': total_balls,
            'per_tube': stats,
            'avg_utilization': sum(s['utilization'] for s in stats) / len(stats),
            'max_tube': max(stats, key=lambda s: s['current_count']),
            'min_tube': min(stats, key=lambda s: s['current_count'])
        }`}
                                />

                                <div className="bg-green-950 border border-green-700 p-4 rounded">
                                    <h4 className="font-mono text-green-400 mb-2 text-xs">REAL_WORLD: Apache Parquet (Columnar Storage)</h4>
                                    <p className="text-xs text-green-200 leading-relaxed">
                                        Our tube system mirrors how Apache Parquet stores data in columnar format. Facebook and Netflix use Parquet for analytics—storing similar data together (like our color columns) enables 100x faster queries than row-based storage. Same principle: group similar items for efficient access.
                                    </p>
                                </div>
                            </div>
                        </Section>

                        {/* Module 4: Dynamic Insertion */}
                        <Section title="MODULE_04: Dynamic Ball Insertion & Reorganization" icon={Zap}>
                            <div className="space-y-4">
                                <div className="bg-gray-900 border-l-4 border-red-500 p-4">
                                    <h4 className="font-mono text-red-400 mb-2">ADVANCED_FEATURE: Mid-Stack Insertion</h4>
                                    <p className="text-gray-300 text-sm">
                                        The inserter mechanism allows balls to be inserted anywhere in a column, not just at the top. This enables dynamic reorganization—sorting by secondary criteria (saturation, lightness) or fixing out-of-order balls without emptying the entire tube.
                                    </p>
                                </div>

                                <CodeBlock 
                                    title="inserter.py - Dynamic Insertion System"
                                    code={`class BallInserter:
    """
    Manages dynamic insertion with ball parting mechanism
    Can insert balls mid-stack by temporarily shifting others
    """
    def __init__(self, tube_manager: TubeManager):
        self.tube_manager = tube_manager
        self.insertion_buffer = {}  # Temporary storage during insertion
        self.insertion_count = 0
        
    def insert_at_position(self, ball: Ball, column: int, 
                          target_position: int) -> bool:
        """
        Insert ball at specific position in column
        
        Algorithm:
        1. Pop all balls above target position
        2. Insert new ball
        3. Push removed balls back on top
        
        Time Complexity: O(k) where k = balls above target
        """
        tube = self.tube_manager.tubes[column]
        
        # Validation
        if target_position > len(tube.balls):
            return False
        
        # Step 1: Remove balls above insertion point
        temp_stack = []
        balls_to_move = len(tube.balls) - target_position
        
        for _ in range(balls_to_move):
            removed = tube.remove_ball()
            if removed:
                temp_stack.append(removed)
        
        # Step 2: Insert new ball
        success = tube.insert_ball(ball)
        if not success:
            # Rollback: restore removed balls
            for b in reversed(temp_stack):
                tube.insert_ball(b)
            return False
        
        # Step 3: Restore balls on top
        for b in reversed(temp_stack):
            tube.insert_ball(b)
        
        self.insertion_count += 1
        return True
    
    def insert_sorted(self, ball: Ball, column: int, 
                     sort_key='saturation') -> bool:
        """
        Insert ball in sorted position within column
        Maintains secondary sort order (e.g., by saturation)
        """
        tube = self.tube_manager.tubes[column]
        
        # Find insertion position using binary search
        position = self._find_sorted_position(
            ball, tube.balls, sort_key
        )
        
        return self.insert_at_position(ball, column, position)
    
    def _find_sorted_position(self, ball: Ball, existing: List[Ball],
                             sort_key: str) -> int:
        """
        Binary search to find correct insertion position
        Maintains sort order for specified key
        """
        if sort_key == 'saturation':
            value = ball.hsl[1]
            key_func = lambda b: b.hsl[1]
        elif sort_key == 'lightness':
            value = ball.hsl[2]
            key_func = lambda b: b.hsl[2]
        else:
            return len(existing)  # Default: append to top
        
        # Binary search
        left, right = 0, len(existing)
        while left < right:
            mid = (left + right) // 2
            if key_func(existing[mid]) < value:
                left = mid + 1
            else:
                right = mid
        
        return left
    
    def reorganize_column(self, column: int, sort_key='saturation'):
        """
        Completely reorganize a column by secondary sort criteria
        Uses in-place sorting to maintain color grouping
        """
        tube = self.tube_manager.tubes[column]
        
        if sort_key == 'saturation':
            tube.balls.sort(key=lambda b: b.hsl[1])
        elif sort_key == 'lightness':
            tube.balls.sort(key=lambda b: b.hsl[2])
        elif sort_key == 'time':
            tube.balls.sort(key=lambda b: b.timestamp)
    
    def balance_columns(self):
        """
        Rebalance balls across similar-color columns
        Prevents any single column from becoming overloaded
        """
        # Calculate average utilization
        stats = self.tube_manager.get_system_stats()
        avg_count = stats['total_balls'] / len(self.tube_manager.tubes)
        
        # Identify overloaded and underutilized tubes
        for tube in self.tube_manager.tubes:
            if len(tube.balls) > avg_count * 1.5:
                # Tube overloaded - redistribute excess
                excess = int(len(tube.balls) - avg_count)
                self._redistribute_excess(tube, excess)
    
    def _redistribute_excess(self, tube: StorageTube, count: int):
        """Move excess balls to adjacent color tubes"""
        # Remove excess balls from top
        excess_balls = []
        for _ in range(count):
            ball = tube.remove_ball()
            if ball:
                excess_balls.append(ball)
        
        # Redistribute to nearest color columns
        for ball in excess_balls:
            # Find best alternative column
            alt_column = self._find_nearest_column(ball, tube.column_id)
            self.tube_manager.store_ball(ball, alt_column)`}
                                />

                                <div className="grid grid-cols-2 gap-4">
                                    <div className="bg-yellow-950 border border-yellow-700 p-4 rounded">
                                        <h4 className="font-mono text-yellow-400 mb-2 text-xs">INSERTION_COMPLEXITY</h4>
                                        <div className="space-y-1 text-xs text-yellow-200 font-mono">
                                            <div>APPEND: O(1) - top insertion</div>
                                            <div>MID-STACK: O(k) - k balls shifted</div>
                                            <div>SORTED: O(k + log n) - search + shift</div>
                                            <div>REORGANIZE: O(n log n) - full column sort</div>
                                        </div>
                                    </div>
                                    <div className="bg-indigo-950 border border-indigo-700 p-4 rounded">
                                        <h4 className="font-mono text-indigo-400 mb-2 text-xs">REAL_WORLD: B-Tree Insertions</h4>
                                        <p className="text-xs text-indigo-200">
                                            Our insertion mechanism mirrors B-tree node splitting in databases. MySQL's InnoDB engine uses B+ trees where mid-node insertions require shifting values—identical to our ball parting. Both systems maintain sort order while allowing dynamic insertions.
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </Section>

                        {/* Module 5: Complete System Integration */}
                        <Section title="MODULE_05: System Integration & Control Flow" icon={Cpu}>
                            <div className="space-y-4">
                                <div className="bg-gray-900 border-l-4 border-cyan-500 p-4">
                                    <h4 className="font-mono text-cyan-400 mb-2">ORCHESTRATION_LAYER</h4>
                                    <p className="text-gray-300 text-sm">
                                        The master controller coordinates all subsystems: magazine queue management, binary tree routing, tube storage, and dynamic insertion. It implements the producer-consumer pattern with thread-safe operations for concurrent ball processing.
                                    </p>
                                </div>

                                <CodeBlock 
                                    title="system_controller.py - Master Control System"
                                    code={`import threading
import time
from queue import Queue

class BallSortingSystem:
    """
    Master controller orchestrating all subsystems
    Implements producer-consumer pattern with thread safety
    """
    def __init__(self, magazine_capacity=50, num_columns=6):
        self.magazine = MagazineController(magazine_capacity)
        self.tree_sorter = BinaryTreeSorter()
        self.tube_manager = TubeManager(num_columns)
        self.inserter = BallInserter(self.tube_manager)
        
        self.is_running = False
        self.processing_thread = None
        self.stats = {
            'balls_processed': 0,
            'avg_processing_time_ms': 0,
            'errors': 0
        }
    
    def start(self):
        """Start the sorting system"""
        self.is_running = True
        self.processing_thread = threading.Thread(
            target=self._processing_loop,
            daemon=True
        )
        self.processing_thread.start()
    
    def stop(self):
        """Gracefully stop the system"""
        self.is_running = False
        if self.processing_thread:
            self.processing_thread.join(timeout=5.0)
    
    def add_ball(self, ball: Ball) -> bool:
        """
        Add ball to magazine queue
        Returns False if magazine is full (backpressure)
        """
        return self.magazine.add_ball(ball)
    
    def _processing_loop(self):
        """
        Main processing loop (runs in separate thread)
        Continuously processes balls from magazine
        """
        while self.is_running:
            # Get next ball from magazine
            ball = self.magazine.release_ball()
            
            if ball is None:
                time.sleep(0.01)  # No balls to process
                continue
            
            try:
                # Process ball through system
                start_time = time.perf_counter()
                
                # Step 1: Route through binary tree
                column = self.tree_sorter.route_ball(ball)
                
                # Step 2: Store in appropriate tube
                success = self.tube_manager.store_ball(ball, column)
                
                if not success:
                    # Tube full - trigger rebalancing
                    self.inserter.balance_columns()
                    # Retry storage
                    self.tube_manager.store_ball(ball, column)
                
                # Update stats
                elapsed_ms = (time.perf_counter() - start_time) * 1000
                self._update_stats(elapsed_ms)
                
            except Exception as e:
                self.stats['errors'] += 1
                print(f"Error processing ball {ball.id}: {e}")
    
    def _update_stats(self, processing_time_ms: float):
        """Update running statistics"""
        n = self.stats['balls_processed']
        avg = self.stats['avg_processing_time_ms']
        
        # Running average calculation
        new_avg = (avg * n + processing_time_ms) / (n + 1)
        
        self.stats['balls_processed'] += 1
        self.stats['avg_processing_time_ms'] = new_avg
    
    def get_system_status(self) -> dict:
        """Comprehensive system status report"""
        return {
            'magazine': self.magazine.get_status(),
            'storage': self.tube_manager.get_system_stats(),
            'tree_stats': self.tree_sorter.get_tree_stats(),
            'processing': self.stats,
            'is_running': self.is_running
        }
    
    def optimize_storage(self, criteria='saturation'):
        """
        Reorganize all columns by secondary sort criteria
        Can be triggered manually or by automatic optimization
        """
        for i in range(len(self.tube_manager.tubes)):
            self.inserter.reorganize_column(i, criteria)
    
    def emergency_stop(self):
        """Emergency shutdown with state preservation"""
        self.stop()
        
        # Save current state for recovery
        state = {
            'magazine_queue': list(self.magazine.queue),
            'storage_tubes': [tube.balls for tube in self.tube_manager.tubes],
            'timestamp': time.time()
        }
        
        return state  # Can be saved to disk for later recovery`}
                                />

                                <div className="bg-red-950 border border-red-700 p-4 rounded">
                                    <h4 className="font-mono text-red-400 mb-2 text-xs">REAL_WORLD: Kubernetes Container Orchestration</h4>
                                    <p className="text-xs text-red-200 leading-relaxed">
                                        Our system controller mirrors Kubernetes' control plane. K8s orchestrates containers (our balls) across nodes (our tubes), routes traffic through services (our binary tree), and maintains desired state with controllers. Google runs billions of containers using these exact orchestration patterns. Our ball sorter is a simplified version of how they manage their entire infrastructure.
                                    </p>
                                </div>
                            </div>
                        </Section>

                        {/* Conclusion */}
                        <div className="bg-gradient-to-r from-cyan-900 via-blue-900 to-purple-900 rounded-lg p-8 mt-8 shadow-2xl border border-cyan-700">
                            <h2 className="text-3xl font-bold mb-4 text-white font-mono">WHY_THIS_MATTERS</h2>
                            <div className="space-y-4 text-cyan-100 text-sm">
                                <div className="bg-black bg-opacity-40 p-4 rounded border border-cyan-800">
                                    <h3 className="text-cyan-300 font-mono mb-2">1. REAL_SYSTEMS_THINKING</h3>
                                    <p className="text-cyan-50">
                                        This isn't a toy project. It demonstrates producer-consumer patterns, binary tree routing, columnar storage, dynamic insertion, and thread-safe orchestration—the same patterns used in Kafka, network routers, Parquet, B-trees, and Kubernetes.
                                    </p>
                                </div>
                                
                                <div className="bg-black bg-opacity-40 p-4 rounded border border-blue-800">
                                    <h3 className="text-blue-300 font-mono mb-2">2. VISUAL_INTERACTIVE_LEARNING</h3>
                                    <p className="text-blue-50">
                                        Watch the system work in real-time. See balls flow from magazine → tree → tubes. This visual approach helps others understand complex systems—a critical skill for teaching, presenting, and collaborating.
                                    </p>
                                </div>

                                <div className="bg-black bg-opacity-40 p-4 rounded border border-purple-800">
                                    <h3 className="text-purple-300 font-mono mb-2">3. SCALABLE_ARCHITECTURE</h3>
                                    <p className="text-purple-50">
                                        Every component is modular and extensible. Want 100 columns instead of 6? Change one parameter. Want to sort by size instead of color? Swap the comparator. This is how you build systems that adapt to changing requirements.
                                    </p>
                                </div>

                                <div className="mt-6 pt-6 border-t border-cyan-700">
                                    <p className="text-white font-mono text-base leading-relaxed">
                                        <strong className="text-cyan-300">Texas Tech Honors College:</strong> This project represents my engineering philosophy: start with a real problem (sorting balls), design a robust solution (magazine + tree + tubes + inserters), implement it with industry patterns, make it interactive and visual, then connect it to real-world systems.
                                    </p>
                                    <p className="text-cyan-200 font-mono text-sm mt-4">
                                        I don't just code—I build systems that solve problems elegantly. That's the mindset I'll bring to every project, research opportunity, and collaborative challenge in the Honors College.
                                    </p>
                                </div>
                            </div>
                        </div>

                        {/* Technical Footer */}
                        <div className="bg-gray-900 rounded-lg p-6 mt-6 border border-gray-700">
                            <h3 className="font-mono text-gray-400 mb-4 text-sm">SYSTEM_SPECIFICATIONS</h3>
                            <div className="grid grid-cols-3 gap-6 text-xs font-mono text-gray-500">
                                <div>
                                    <div className="mb-2 text-cyan-400">CORE_ALGORITHMS:</div>
                                    <div className="ml-4 space-y-1 text-gray-400">
                                        <div>• Binary tree routing: O(log n)</div>
                                        <div>• FIFO magazine queue: O(1)</div>
                                        <div>• LIFO tube storage: O(1)</div>
                                        <div>• Binary search insertion: O(log n)</div>
                                        <div>• Column rebalancing: O(n)</div>
                                    </div>
                                </div>
                                <div>
                                    <div className="mb-2 text-cyan-400">DATA_STRUCTURES:</div>
                                    <div className="ml-4 space-y-1 text-gray-400">
                                        <div>• Deque (magazine)</div>
                                        <div>• Binary tree (sorter)</div>
                                        <div>• Array list (tubes)</div>
                                        <div>• Hash map (color index)</div>
                                        <div>• Thread-safe queue</div>
                                    </div>
                                </div>
                                <div>
                                    <div className="mb-2 text-cyan-400">REAL_WORLD_PARALLELS:</div>
                                    <div className="ml-4 space-y-1 text-gray-400">
                                        <div>• Apache Kafka</div>
                                        <div>• Network routers</div>
                                        <div>• Apache Parquet</div>
                                        <div>• MySQL B-trees</div>
                                        <div>• Kubernetes</div>
                                    </div>
                                </div>
                            </div>
                            <div className="mt-6 text-center text-gray-600 text-xs font-mono border-t border-gray-800 pt-4">
                                Created for Texas Tech University Honors College Application Portfolio · 2026
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<BallSortingPortfolio />, document.getElementById('root'));
    </script>
</body>
</html>